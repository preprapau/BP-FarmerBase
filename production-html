<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="UTF-8">
<title>рдЙрддреНрдкрд╛рджрди рддрдерд╛ рдмрд┐рдХреНрд░реА рдпреЛрдЬрдирд╛ | BP Engine</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family:"Noto Sans Devanagari","Kalimati",system-ui;
  background:#f4f7f6;
  margin:0;
}
.container{
  max-width:1000px;
  margin:20px auto;
  background:#fff;
  padding:25px;
  border-radius:10px;
}
h1{color:#2e7d32;text-align:center}

/* navigation */
.nav{
  display:flex;
  justify-content:space-between;
  margin-bottom:10px;
}
.nav a{
  text-decoration:none;
  color:#2e7d32;
  font-weight:600;
  font-size:14px;
}

/* selector */
.selector{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
  margin-bottom:15px;
}
.selector label{
  font-weight:600;
  font-size:14px;
}

/* table */
table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}
th,td{
  border:1px solid #ccc;
  padding:6px;
  text-align:center;
}
th{background:#eef5ee}
input,select{
  width:100%;
  padding:6px;
}
button{
  margin-top:15px;
  padding:10px 18px;
  background:#2e7d32;
  color:#fff;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
.note{
  margin-top:10px;
  font-size:13px;
  color:#555;
  text-align:center;
}

/* footer */
.footer{
  margin-top:25px;
  padding-top:10px;
  border-top:1px solid #ccc;
  text-align:center;
  font-size:13px;
  color:#555;
}

@media print{
  button,.nav,.selector{display:none}
}
</style>
</head>

<body>
<div class="container">

<!-- TOP NAV -->
<div class="nav">
  <a href="/business-detail.html">тмЕя╕П Business Detail</a>
  <a href="/expenses.html">Expenses тЮбя╕П</a>
</div>

<h1>рдЙрддреНрдкрд╛рджрди рддрдерд╛ рдмрд┐рдХреНрд░реА рдпреЛрдЬрдирд╛</h1>

<!-- ================= BUSINESS SELECTOR ================= -->
<div class="selector">
  <label>
    рд╡реНрдпрд╡рд╕рд╛рдп рдкреНрд░рдХрд╛рд░ (Business Type)
    <select id="businessType">
      <option value="animal">рдкрд╢реБрдкрд╛рд▓рди (Animal)</option>
      <option value="crop" disabled>рддрд░рдХрд╛рд░реА / рдмрд╛рд▓реА (Crop) тАУ Coming Soon</option>
      <option value="other" disabled>рдЕрдиреНрдп рд╡реНрдпрд╡рд╕рд╛рдп (Other) тАУ Coming Soon</option>
    </select>
  </label>

  <label>
    рдкрд╢реБ рдкреНрд░рдХрд╛рд░ (Animal Type)
    <select id="animalType">
      <option value="pig">рдмрдВрдЧреБрд░ (Pig)</option>
      <option value="goat" disabled>рдмрд╛рдЦреНрд░рд╛ (Goat) тАУ Coming Soon</option>
    </select>
  </label>
</div>

<!-- ================= INPUT TABLE ================= -->
<table>
<tr>
  <th>рдкреНрд░рд╛рд░рдореНрднрд┐рдХ рдмрдпрд╕реНрдХ рд╕рдВрдЦреНрдпрд╛<br><small>(Initial Adult Count)</small></th>
  <td><input id="adult" value="300"></td>
</tr>
<tr>
  <th>рдмреНрдпрд╛рдЙрдиреЗ рджрд░ (%)<br><small>(Breeding Rate)</small></th>
  <td><input id="breedRate" value="90"></td>
</tr>
<tr>
  <th>рдкреНрд░рддрд┐ рдмрдпрд╕реНрдХ рд╡рд╛рд░реНрд╖рд┐рдХ рдмрдЪреНрдЪрд╛<br><small>(Offspring / Year)</small></th>
  <td><input id="kids" value="20"></td>
</tr>
<tr>
  <th>рдмрдЪреНрдЪрд╛ рдореГрддреНрдпреБрджрд░ (%)<br><small>(Mortality Rate)</small></th>
  <td><input id="death" value="10"></td>
</tr>
<tr>
  <th>рднрд╛рд▓реЗ рдЕрдиреБрдкрд╛рдд (%)<br><small>(Male Ratio)</small></th>
  <td><input id="maleRate" value="50"></td>
</tr>
<tr>
  <th>рд░рд╛рдЦрд┐рдиреЗ рдкреЛрдереА (%)<br><small>(Female Retention)</small></th>
  <td><input id="keepFemale" value="40"></td>
</tr>
<tr>
  <th>рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди (рдмрдпрд╕реНрдХ рдмрд┐рдХреНрд░реА %)<br><small>(Adult Replacement Sale)</small></th>
  <td><input id="replacement" value="10"></td>
</tr>
</table>

<button onclick="saveAndCalculate()">ЁЯТ╛ Save & Calculate</button>

<div class="note">
ЁЯУМ рдиреЛрдЯ: рдпреЛ рдкреЗрдЬ рдЙрддреНрдкрд╛рджрди (Quantity Planning) рдХрд╛ рд▓рд╛рдЧрд┐ рдорд╛рддреНрд░ рд╣реЛред<br>
рдЦрд░реНрдЪ, рдмрд┐рдХреНрд░реА рддрдерд╛ рдирддрд┐рдЬрд╛ рдЕрдиреНрдп рдореЛрдбреНрдпреБрд▓рдмрд╛рдЯ рд╕реНрд╡рддрдГ рдЧрдгрдирд╛ рд╣реБрдиреНрдЫред
</div>

<h2 style="margin-top:30px;color:#2e7d32;text-align:center">
рел рд╡рд░реНрд╖реЗ рдкрд░рд┐рдгрд╛рдо (Auto Projection)
</h2>

<table>
<thead>
<tr>
<th>рд╡рд░реНрд╖</th>
<th>рдмрдпрд╕реНрдХ рд╕рдВрдЦреНрдпрд╛</th>
<th>рдЬрдиреНрдорд┐рдПрдХрд╛ (рдмрд╛рдБрдЪреЗрдХ)</th>
<th>рдмрд┐рдХреНрд░реА (рдмрдЪреНрдЪрд╛)</th>
<th>рдмрдпрд╕реНрдХ рдмрд┐рдХреНрд░реА<br>(рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди)</th>
<th>рдЕрд░реНрдХреЛ рд╡рд░реНрд╖рдХрд╛ рдмрдпрд╕реНрдХ</th>
</tr>
</thead>
<tbody id="resultBody"></tbody>
</table>

<!-- BOTTOM NAV -->
<div class="nav" style="margin-top:15px">
  <a href="/business-detail.html">тмЕя╕П Business Detail</a>
  <a href="/expenses.html">Expenses тЮбя╕П</a>
</div>

<div class="footer">
  <strong>Farmer Base BP Engine</strong> тАУ рдХреГрд╖рдХрдореИрддреНрд░реА рд╡реНрдпрд╡рд╕рд╛рдпрд┐рдХ рдпреЛрдЬрдирд╛ рдпрдиреНрддреНрд░<br>
  рдЧрдгрдирд╛рдорд╛ рд╕реНрдкрд╖реНрдЯрддрд╛, рдХреГрд╖рд┐рдорд╛ рдЖрддреНрдордирд┐рд░реНрднрд░рддрд╛<br>
  Concept By : Prem Prasad Paudel, Rasuwa.
</div>

</div>

<script>
function num(id){
  return parseFloat(document.getElementById(id).value) || 0;
}

function saveAndCalculate(){
  const data = {
    businessType: document.getElementById("businessType").value,
    animalType: document.getElementById("animalType").value,

    adult:num("adult"),
    breedRate:num("breedRate"),
    kids:num("kids"),
    death:num("death"),
    maleRate:num("maleRate"),
    keepFemale:num("keepFemale"),
    replacement:num("replacement")
  };

  localStorage.setItem("productionSalesPlan",JSON.stringify(data));
  calculate(data);
}

function calculate(d){
  const body=document.getElementById("resultBody");
  body.innerHTML="";
  let adult=d.adult;

  for(let y=1;y<=5;y++){
    let breeding=adult*d.breedRate/100;
    let born=breeding*d.kids;
    let alive=born*(100-d.death)/100;

    let male=alive*d.maleRate/100;
    let female=alive-male;

    let keepF=female*d.keepFemale/100;
    let sellKids=alive-keepF;

    let replaceSell=adult*d.replacement/100;

    body.innerHTML+=`
      <tr>
        <td>${y}</td>
        <td>${Math.round(adult)}</td>
        <td>${Math.round(alive)}</td>
        <td>${Math.round(sellKids)}</td>
        <td>${Math.round(replaceSell)}</td>
        <td>${Math.round(adult+keepF)}</td>
      </tr>
    `;
    adult=adult+keepF;
  }
}

/* LOAD SAVED */
const saved=localStorage.getItem("productionSalesPlan");
if(saved){
  const d=JSON.parse(saved);
  for(let k in d){
    if(document.getElementById(k)) document.getElementById(k).value=d[k];
  }
  calculate(d);
}
</script>

</body>
</html>
