<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="UTF-8">
<title>ProfitтАУLoss Summary | Farmerbase BP Engine</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family:"Noto Sans Devanagari","Kalimati",system-ui;
  background:#f4f7f6;margin:0
}
header,footer{
  background:#e8f5e9;
  padding:10px 16px;
  display:flex;
  justify-content:space-between
}
header a,footer a{
  color:#2e7d32;
  font-weight:600;
  text-decoration:none
}
.wrap{
  max-width:800px;
  margin:18px auto;
  background:#fff;
  padding:22px;
  border-radius:12px
}
h2{color:#2e7d32;margin-top:0}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{
  border:1px solid #ccc;
  padding:8px;
  text-align:right
}
th{background:#eef5ee}
.left{text-align:left}
.sum{font-weight:700;background:#fafafa}
.ok{color:#2e7d32;font-weight:700}
.warn{color:#c62828;font-weight:700}
.small{font-size:13px;color:#2e7d32}
button{
  padding:10px 16px;
  background:#2e7d32;
  color:#fff;
  border:none;
  border-radius:8px;
  cursor:pointer
}
</style>
</head>

<body>

<header>
  <a href="profit-loss-demo.html">тЧАя╕П ProfitтАУLoss</a>
  <a href="index.html">ЁЯПа Home</a>
</header>

<div class="wrap">

<h2>ЁЯУЛ ProfitтАУLoss Summary (ROI рдЕрдШрд┐ рдкреБрд╖реНрдЯрд┐)</h2>

<table>
<tr>
  <th class="left">рд╡рд┐рд╡рд░рдг</th>
  <th>рд░рдХрдо</th>
</tr>

<tr>
  <td class="left">рдХреБрд▓ рдЖрдореНрджрд╛рдиреА</td>
  <td id="totalIncome">0</td>
</tr>

<tr>
  <td class="left">рдЪрд╛рд▓реБ рдЦрд░реНрдЪ</td>
  <td id="operatingCost">0</td>
</tr>

<tr>
  <td class="left">рд╕реНрдерд┐рд░ рдЦрд░реНрдЪ / рд▓рдЧрд╛рдиреА</td>
  <td id="fixedCost">0</td>
</tr>

<tr>
  <td class="left">рд╣реНрд░рд╛рд╕рдХрдЯреНрдЯреА</td>
  <td id="depreciation">0</td>
</tr>

<tr class="sum">
  <td class="left">рдХрд░-рдкреВрд░реНрд╡ рдирд╛рдлрд╛</td>
  <td id="profitBeforeTax">0</td>
</tr>

<tr>
  <td class="left">рдЖрдореНрджрд╛рдиреА рдХрд░</td>
  <td id="incomeTax">0</td>
</tr>

<tr class="sum">
  <td class="left">рдХрд░-рдкрдЫрд┐рдХреЛ рдЦреБрдж рдирд╛рдлрд╛</td>
  <td id="netProfit">0</td>
</tr>
</table>

<p id="status" class="small"></p>

<div style="margin-top:16px;text-align:center">
  <button onclick="goROI()">тЬФя╕П Confirm & Go to ROI</button>
</div>

</div>

<footer>
  <a href="profit-loss-demo.html">тЧАя╕П Back</a>
  <a href="roi.html">ROI тЦ╢я╕П</a>
</footer>

<script>
/* =====================================================
   LOAD PROJECT DATA
   ===================================================== */
const projectKey = localStorage.getItem("activeProject");
if(!projectKey){
  alert("рдкрд╣рд┐рд▓реЗ Project рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реН");
  location.href="index.html";
}

const project = JSON.parse(localStorage.getItem(projectKey)) || {};
const pl = project.profitLoss || {};

/* =====================================================
   RENDER SUMMARY
   ===================================================== */
function render(){

  totalIncome.innerText = (pl.totalIncome||0).toFixed(2);
  operatingCost.innerText = (pl.operatingCost||0).toFixed(2);
  fixedCost.innerText = (pl.fixedCost||0).toFixed(2);
  depreciation.innerText = (pl.depreciation||0).toFixed(2);
  profitBeforeTax.innerText = (pl.profitBeforeTax||0).toFixed(2);
  incomeTax.innerText = (pl.incomeTax||0).toFixed(2);
  netProfit.innerText = (pl.netProfit||0).toFixed(2);

  if((pl.netProfit||0) > 0){
    status.innerHTML =
      "тЬЕ рдирд╛рдлрд╛ рд╕рдХрд╛рд░рд╛рддреНрдордХ рдЫ ред ROI рдЧрдгрдирд╛ рдЧрд░реНрди рддрдпрд╛рд░ред";
    status.className = "ok";
  }else{
    status.innerHTML =
      "тЪая╕П рдирд╛рдлрд╛ рд╢реВрдиреНрдп рд╡рд╛ рдирдХрд╛рд░рд╛рддреНрдордХ рдЫ ред ROI рдЕрдШрд┐ рдкреБрдирд░рд╛рд╡рд▓реЛрдХрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред";
    status.className = "warn";
  }
}

/* =====================================================
   GO TO ROI
   ===================================================== */
function goROI(){
  location.href = "roi.html";
}

render();
</script>

</body>
</html>
