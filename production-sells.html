<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="UTF-8">
<title>рдЙрддреНрдкрд╛рджрди рддрдерд╛ рдмрд┐рдХреНрд░реА рдпреЛрдЬрдирд╛ | Farmerbase BP Engine</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family:"Noto Sans Devanagari","Kalimati",system-ui;
  background:#f4f7f6;margin:0
}
header,footer{
  background:#e8f5e9;
  padding:10px 16px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-size:14px
}
header a,footer a{
  text-decoration:none;
  color:#2e7d32;
  font-weight:600
}
.container{
  max-width:1050px;
  margin:18px auto;
  background:#fff;
  padding:22px;
  border-radius:12px
}
h1,h2{color:#2e7d32;text-align:center}
table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px
}
th,td{
  border:1px solid #ccc;
  padding:6px;
  text-align:center
}
th{background:#eef5ee}
input,select{
  width:100%;
  padding:6px;
  box-sizing:border-box
}
button{
  padding:6px 12px;
  background:#2e7d32;
  color:#fff;
  border:none;
  border-radius:6px;
  cursor:pointer
}
.hidden{display:none}
.note{font-size:13px;color:#555}
.auto{color:#2e7d32;font-size:13px}
</style>
</head>

<body>

<header>
  <a href="index.html">ЁЯПа Back to Home</a>
  <div>
    <a href="short-info.html">тЧАя╕П Previous</a> |
    <a href="operating-cost-engine.html">Operating Cost тЦ╢я╕П</a>
  </div>
</header>

<div class="container">

<h1>рдЙрддреНрдкрд╛рджрди рддрдерд╛ рдмрд┐рдХреНрд░реА рдпреЛрдЬрдирд╛</h1>

<!-- ================= PRIMARY BUSINESS ================= -->
<h2>ЁЯРР рдореБрдЦреНрдп рд╡реНрдпрд╡рд╕рд╛рдп (рдкрд╛рд▓рди)</h2>

<table>
<tr>
  <th>рдкрд╛рд▓рди рдкреНрд░рдХрд╛рд░</th>
  <td>
    <select id="animalType">
      <option value="goat">рдмрд╛рдЦреНрд░рд╛</option>
      <option value="pig">рдмрдВрдЧреБрд░</option>
    </select>
  </td>
</tr>
<tr><th>рдкреНрд░рд╛рд░рдореНрднрд┐рдХ рдмрдпрд╕реНрдХ рд╕рдВрдЦреНрдпрд╛</th><td><input id="adult"></td></tr>
<tr><th>рдмреНрдпрд╛рдЙрдиреЗ рджрд░ (%)</th><td><input id="breedRate"></td></tr>
<tr><th>рдкреНрд░рддрд┐ рдмрдпрд╕реНрдХ рд╡рд╛рд░реНрд╖рд┐рдХ рдЙрддреНрдкрд╛рджрди</th><td><input id="kids"></td></tr>
<tr><th>рдореГрддреНрдпреБрджрд░ (%)</th><td><input id="death"></td></tr>
</table>

<h2>ЁЯФв рдкрд╛рд▓рди рддрд╛рд▓рд┐рдХрд╛ (Animal Only)</h2>

<table id="animalStage">
<tr>
  <th>Stage</th><th>рдЙрдореЗрд░</th><th>рджрд┐рди</th><th>%</th><th>рд╕рдВрдЦреНрдпрд╛</th>
</tr>
<tr>
  <td>S1</td><td><input id="l1" value="1тАУ3 рдорд╣рд┐рдирд╛"></td>
  <td><input id="d1" value="90"></td>
  <td><input id="p1" value="30"></td>
  <td id="c1">0</td>
</tr>
<tr>
  <td>S2</td><td><input id="l2" value="4тАУ5 рдорд╣рд┐рдирд╛"></td>
  <td><input id="d2" value="60"></td>
  <td><input id="p2" value="25"></td>
  <td id="c2">0</td>
</tr>
<tr>
  <td>S3</td><td><input id="l3" value="5тАУ9 рдорд╣рд┐рдирд╛"></td>
  <td><input id="d3" value="120"></td>
  <td><input id="p3" value="25"></td>
  <td id="c3">0</td>
</tr>
<tr>
  <td>S4</td><td><input id="l4" value="10+ рдорд╣рд┐рдирд╛"></td>
  <td><input id="d4" value="365"></td>
  <td><input id="p4" value="20"></td>
  <td id="c4">0</td>
</tr>
</table>

<!-- ================= SECONDARY BUSINESS ================= -->
<h2>ЁЯем рд╕рд╣рд╛рдпрдХ рд╡реНрдпрд╡рд╕рд╛рдп</h2>
<button onclick="toggleVeg()">+ рддрд░рдХрд╛рд░реА рдЦреЗрддреА рдердкреНрдиреБрд╣реЛрд╕реН</button>

<div id="vegBox" class="hidden">
<table>
<tr><th>рдЦреЗрддреА рдХреНрд╖реЗрддреНрд░ (рд░реЛрдкрдиреА)</th><td><input id="area"></td></tr>
<tr><th>рдкреНрд░рддрд┐ рд░реЛрдкрдиреА рдЙрддреНрдкрд╛рджрди (kg)</th><td><input id="yield"></td></tr>
<tr><th>рд╡рд░реНрд╖рдорд╛ рд╕рд┐рдЬрди рд╕рдВрдЦреНрдпрд╛</th><td><input id="season"></td></tr>
<tr><th>рдХреНрд╖рддрд┐ рджрд░ (%)</th><td><input id="loss"></td></tr>
</table>
</div>

<p class="auto">тЬФя╕П рдХреБрдиреИ рдкрдирд┐ рдкрд░рд┐рд╡рд░реНрддрди рд╣реБрдБрджрд╛ Auto-Save рд╣реБрдиреНрдЫ</p>

</div>

<footer>
  <a href="short-info.html">тЧАя╕П Previous</a>
  <a href="index.html">ЁЯПа Home</a>
  <a href="operating-cost-engine.html">Next тЦ╢я╕П</a>
</footer>

<script>
function num(id){return Number(document.getElementById(id).value)||0}
function $(id){return document.getElementById(id)}

function toggleVeg(){
  vegBox.classList.toggle("hidden");
  save();
}

function save(){
  /* ===== Animal Logic ===== */
  let alive = num("adult")*(num("breedRate")/100)*num("kids");
  alive = alive*(100-num("death"))/100;

  let stages={}, totalPct=0;
  ["1","2","3","4"].forEach(i=>{
    let pct=num("p"+i); totalPct+=pct;
    let cnt=Math.round(alive*pct/100);
    $("c"+i).innerText=cnt;
    stages["S"+i]={
      label:$("l"+i).value,
      days:num("d"+i),
      pct:pct,
      count:cnt
    };
  });

  if(totalPct!==100) return;

  /* ===== Vegetable Logic ===== */
  let veg = vegBox.classList.contains("hidden") ? null : {
    area:num("area"),
    yield:num("yield"),
    season:num("season"),
    loss:num("loss"),
    production:
      num("area")*num("yield")*num("season")*
      (100-num("loss"))/100
  };

  localStorage.setItem("PRODUCTION_STAGE_DATA",JSON.stringify({
    primary:{
      type:"animal",
      animal:animalType.value,
      alive,
      stages
    },
    secondary:veg
  }));
}

/* AUTO SAVE */
document.addEventListener("input",e=>{
  if(e.target.tagName==="INPUT" || e.target.tagName==="SELECT"){
    save();
  }
});

/* INIT */
save();
</script>

</body>
</html>
