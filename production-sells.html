<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="UTF-8">
<title>‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§® ‡§§‡§•‡§æ ‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ | BPMS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family:"Noto Sans Devanagari","Kalimati",system-ui;
  background:#f4f7f6;margin:0;
}
.container{
  max-width:1200px;
  margin:25px auto;
  background:#fff;
  padding:25px;
  border-radius:12px;
}
h1,h2{color:#2e7d32;text-align:center}
table{
  width:100%;
  border-collapse:collapse;
  margin-top:12px;
}
th,td{
  border:1px solid #ccc;
  padding:6px;
  text-align:center;
}
th{background:#eef5ee}
input{width:100%;padding:6px}
button{
  margin-top:15px;
  padding:10px 18px;
  background:#2e7d32;
  color:#fff;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
.note{font-size:13px;color:#555;margin-top:8px}
.sum{font-weight:700;background:#f3faf3}
@media print{button{display:none}}
</style>
</head>

<body>
<div class="container">

<h1>‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§® ‡§§‡§•‡§æ ‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ</h1>

<!-- ================= BASIC INPUT ================= -->
<h2>‡§Ü‡§ß‡§æ‡§∞‡§≠‡•Ç‡§§ ‡§µ‡§ø‡§µ‡§∞‡§£</h2>
<table>
<tr><th>‡§™‡•ç‡§∞‡§æ‡§∞‡§Æ‡•ç‡§≠‡§ø‡§ï ‡§¨‡§Ø‡§∏‡•ç‡§ï ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ</th><td><input id="adult" value="150"></td></tr>
<tr><th>‡§¨‡•ç‡§Ø‡§æ‡§â‡§®‡•á ‡§¶‡§∞ (%)</th><td><input id="breedRate" value="90"></td></tr>
<tr><th>‡§™‡•ç‡§∞‡§§‡§ø ‡§¨‡§Ø‡§∏‡•ç‡§ï ‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï ‡§¨‡§ö‡•ç‡§ö‡§æ</th><td><input id="kids" value="20"></td></tr>
<tr><th>‡§¨‡§ö‡•ç‡§ö‡§æ ‡§Æ‡•É‡§§‡•ç‡§Ø‡•Å‡§¶‡§∞ (%)</th><td><input id="death" value="10"></td></tr>
</table>

<!-- ================= YEAR WISE SELL ================= -->
<h2 style="margin-top:30px">‡§µ‡§∞‡•ç‡§∑ ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä % ‡§§‡§•‡§æ ‡§¶‡§∞</h2>

<table>
<tr>
  <th>‡§µ‡§∞‡•ç‡§∑</th>
  <th>‡§¨‡§ö‡•ç‡§ö‡§æ ‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä %</th>
  <th>‡§¨‡§ö‡•ç‡§ö‡§æ ‡§¶‡§∞ (‡§∞‡•Å.)</th>
  <th>‡§Æ‡§æ‡§â ‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä %</th>
  <th>‡§Æ‡§æ‡§â ‡§¶‡§∞ (‡§∞‡•Å.)</th>
</tr>

<tr><td>‡•ß</td><td><input class="sellKid" value="70"></td><td><input class="kidRate" value="8000"></td><td><input class="sellAdult" value="10"></td><td><input class="adultRate" value="25000"></td></tr>
<tr><td>‡•®</td><td><input class="sellKid" value="75"></td><td><input class="kidRate" value="8500"></td><td><input class="sellAdult" value="20"></td><td><input class="adultRate" value="26000"></td></tr>
<tr><td>‡•©</td><td><input class="sellKid" value="80"></td><td><input class="kidRate" value="9000"></td><td><input class="sellAdult" value="30"></td><td><input class="adultRate" value="27000"></td></tr>
<tr><td>‡•™</td><td><input class="sellKid" value="85"></td><td><input class="kidRate" value="9500"></td><td><input class="sellAdult" value="40"></td><td><input class="adultRate" value="28000"></td></tr>
<tr><td>‡•´</td><td><input class="sellKid" value="90"></td><td><input class="kidRate" value="10000"></td><td><input class="sellAdult" value="50"></td><td><input class="adultRate" value="30000"></td></tr>
</table>

<button onclick="saveAndCalculate()">üíæ Save & Calculate</button>

<p class="note">‚úîÔ∏è ‡§§‡§≤‡§ï‡•ã ‡§Ü‡§Æ‡•ç‡§¶‡§æ‡§®‡•Ä ‡§§‡§æ‡§≤‡§ø‡§ï‡§æ Income page ‡§≤‡•á ‡§∏‡§ø‡§ß‡•à ‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó ‡§ó‡§∞‡•ç‡§õ</p>

<!-- ================= RESULT ================= -->
<h2 style="margin-top:35px">‡•´ ‡§µ‡§∞‡•ç‡§∑‡•á ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§® ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ (‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ)</h2>

<table>
<thead>
<tr>
<th>‡§µ‡§∞‡•ç‡§∑</th>
<th>‡§¨‡§Ø‡§∏‡•ç‡§ï</th>
<th>‡§¨‡§æ‡§Å‡§ö‡•á‡§ï ‡§¨‡§ö‡•ç‡§ö‡§æ</th>
<th>‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä (‡§¨‡§ö‡•ç‡§ö‡§æ)</th>
<th>‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä (‡§Æ‡§æ‡§â)</th>
<th>‡§Ö‡§∞‡•ç‡§ï‡•ã ‡§µ‡§∞‡•ç‡§∑ ‡§¨‡§Ø‡§∏‡•ç‡§ï</th>
</tr>
</thead>
<tbody id="qtyBody"></tbody>
</table>

<!-- ================= REVENUE ================= -->
<h2 style="margin-top:35px">‡•´ ‡§µ‡§∞‡•ç‡§∑‡•á ‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä ‡§Ü‡§Æ‡•ç‡§¶‡§æ‡§®‡•Ä (‡§∞‡•Å.)</h2>

<table>
<thead>
<tr>
<th>‡§µ‡§∞‡•ç‡§∑</th>
<th>‡§¨‡§ö‡•ç‡§ö‡§æ ‡§Ü‡§Æ‡•ç‡§¶‡§æ‡§®‡•Ä</th>
<th>‡§Æ‡§æ‡§â ‡§Ü‡§Æ‡•ç‡§¶‡§æ‡§®‡•Ä</th>
<th>‡§ï‡•Å‡§≤ ‡§Ü‡§Æ‡•ç‡§¶‡§æ‡§®‡•Ä</th>
</tr>
</thead>
<tbody id="revBody"></tbody>
<tfoot>
<tr class="sum">
<td>‡§ú‡§Æ‡•ç‡§Æ‡§æ</td>
<td id="totKidRev">0</td>
<td id="totAdultRev">0</td>
<td id="totRev">0</td>
</tr>
</tfoot>
</table>

</div>

<script>
function n(v){return Number(v)||0;}

function saveAndCalculate(){
  let plan={
    base:{
      adult:n(adult.value),
      breedRate:n(breedRate.value),
      kids:n(kids.value),
      death:n(death.value)
    },
    years:[],
    results:[]
  };

  document.querySelectorAll(".sellKid").forEach((el,i)=>{
    plan.years.push({
      sellKid:n(el.value),
      kidRate:n(document.querySelectorAll(".kidRate")[i].value),
      sellAdult:n(document.querySelectorAll(".sellAdult")[i].value),
      adultRate:n(document.querySelectorAll(".adultRate")[i].value)
    });
  });

  calculate(plan);
  localStorage.setItem("productionSalesPlan",JSON.stringify(plan));
}

function calculate(p){
  let adult=p.base.adult;
  qtyBody.innerHTML="";
  revBody.innerHTML="";

  let tKR=0,tAR=0,tR=0;
  p.results=[];

  for(let y=0;y<5;y++){
    let born=adult*p.base.breedRate/100*p.base.kids;
    let alive=born*(100-p.base.death)/100;

    let sellK=alive*p.years[y].sellKid/100;
    let sellA=adult*p.years[y].sellAdult/100;

    let kRev=sellK*p.years[y].kidRate;
    let aRev=sellA*p.years[y].adultRate;

    let nextAdult=adult+(alive-sellK)-sellA;

    qtyBody.innerHTML+=`
    <tr>
      <td>${y+1}</td>
      <td>${Math.round(adult)}</td>
      <td>${Math.round(alive)}</td>
      <td>${Math.round(sellK)}</td>
      <td>${Math.round(sellA)}</td>
      <td>${Math.round(nextAdult)}</td>
    </tr>`;

    revBody.innerHTML+=`
    <tr>
      <td>${y+1}</td>
      <td>${Math.round(kRev)}</td>
      <td>${Math.round(aRev)}</td>
      <td>${Math.round(kRev+aRev)}</td>
    </tr>`;

    tKR+=kRev; tAR+=aRev; tR+=(kRev+aRev);

    p.results.push({
      year:y+1,
      kidQty:Math.round(sellK),
      adultQty:Math.round(sellA),
      kidRevenue:Math.round(kRev),
      adultRevenue:Math.round(aRev),
      totalRevenue:Math.round(kRev+aRev)
    });

    adult=nextAdult;
  }

  totKidRev.innerText=Math.round(tKR);
  totAdultRev.innerText=Math.round(tAR);
  totRev.innerText=Math.round(tR);

  // üëâ Income page direct input
  localStorage.setItem("productionIncome",JSON.stringify(p.results));
}

// auto load
let saved=localStorage.getItem("productionSalesPlan");
if(saved){
  let p=JSON.parse(saved);
  adult.value=p.base.adult;
  breedRate.value=p.base.breedRate;
  kids.value=p.base.kids;
  death.value=p.base.death;
  p.years.forEach((y,i)=>{
    document.querySelectorAll(".sellKid")[i].value=y.sellKid;
    document.querySelectorAll(".kidRate")[i].value=y.kidRate;
    document.querySelectorAll(".sellAdult")[i].value=y.sellAdult;
    document.querySelectorAll(".adultRate")[i].value=y.adultRate;
  });
  calculate(p);
}
</script>

</body>
</html>
