<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="UTF-8">
<title>рдЙрддреНрдкрд╛рджрди рддрдерд╛ рдмрд┐рдХреНрд░реА рдпреЛрдЬрдирд╛ | BPMS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family:"Noto Sans Devanagari","Kalimati",system-ui;
  background:#f4f7f6;margin:0;
}
.container{
  max-width:1100px;
  margin:25px auto;
  background:#fff;
  padding:25px;
  border-radius:12px;
}
h1,h2{color:#2e7d32;text-align:center}
table{
  width:100%;
  border-collapse:collapse;
  margin-top:12px;
}
th,td{
  border:1px solid #ccc;
  padding:6px;
  text-align:center;
}
th{background:#eef5ee}
input{width:100%;padding:6px}
button{
  margin-top:15px;
  padding:10px 18px;
  background:#2e7d32;
  color:#fff;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
.note{font-size:13px;color:#555;margin-top:8px}
@media print{
  button{display:none}
}
</style>
</head>

<body>
<div class="container">

<h1>рдЙрддреНрдкрд╛рджрди рддрдерд╛ рдмрд┐рдХреНрд░реА рдпреЛрдЬрдирд╛</h1>

<!-- ================= BASIC INPUT ================= -->
<h2>рдЖрдзрд╛рд░рднреВрдд рд╡рд┐рд╡рд░рдг</h2>
<table>
<tr><th>рдкреНрд░рд╛рд░рдореНрднрд┐рдХ рдмрдпрд╕реНрдХ рд╕рдВрдЦреНрдпрд╛</th><td><input id="adult" value="150"></td></tr>
<tr><th>рдмреНрдпрд╛рдЙрдиреЗ рджрд░ (%)</th><td><input id="breedRate" value="90"></td></tr>
<tr><th>рдкреНрд░рддрд┐ рдмрдпрд╕реНрдХ рд╡рд╛рд░реНрд╖рд┐рдХ рдмрдЪреНрдЪрд╛</th><td><input id="kids" value="20"></td></tr>
<tr><th>рдмрдЪреНрдЪрд╛ рдореГрддреНрдпреБрджрд░ (%)</th><td><input id="death" value="10"></td></tr>
<tr><th>рднрд╛рд▓реЗ рдЕрдиреБрдкрд╛рдд (%)</th><td><input id="maleRate" value="50"></td></tr>
</table>

<!-- ================= YEAR WISE SELL ================= -->
<h2 style="margin-top:30px">рд╡рд░реНрд╖ рдЕрдиреБрд╕рд╛рд░ рдмрд┐рдХреНрд░реА / рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди % рд░ рдореВрд▓реНрдп</h2>

<table>
<tr>
  <th>рд╡рд░реНрд╖</th>
  <th>рдмрдЪреНрдЪрд╛ рдмрд┐рдХреНрд░реА %</th>
  <th>рдмрдЪреНрдЪрд╛ рдмрд┐рдХреНрд░реА рджрд░ (рд░реБ.)</th>
  <th>рдорд╛рдЙ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдмрд┐рдХреНрд░реА %</th>
  <th>рдорд╛рдЙ рдмрд┐рдХреНрд░реА рджрд░ (рд░реБ.)</th>
</tr>

<tr>
<td>рд╡рд░реНрд╖ рез</td>
<td><input class="sellKid" value="70"></td>
<td><input class="kidRate" value="8000"></td>
<td><input class="sellAdult" value="10"></td>
<td><input class="adultRate" value="25000"></td>
</tr>

<tr>
<td>рд╡рд░реНрд╖ реи</td>
<td><input class="sellKid" value="75"></td>
<td><input class="kidRate" value="8500"></td>
<td><input class="sellAdult" value="20"></td>
<td><input class="adultRate" value="26000"></td>
</tr>

<tr>
<td>рд╡рд░реНрд╖ рей</td>
<td><input class="sellKid" value="80"></td>
<td><input class="kidRate" value="9000"></td>
<td><input class="sellAdult" value="30"></td>
<td><input class="adultRate" value="27000"></td>
</tr>

<tr>
<td>рд╡рд░реНрд╖ рек</td>
<td><input class="sellKid" value="85"></td>
<td><input class="kidRate" value="9500"></td>
<td><input class="sellAdult" value="40"></td>
<td><input class="adultRate" value="28000"></td>
</tr>

<tr>
<td>рд╡рд░реНрд╖ рел</td>
<td><input class="sellKid" value="90"></td>
<td><input class="kidRate" value="10000"></td>
<td><input class="sellAdult" value="50"></td>
<td><input class="adultRate" value="30000"></td>
</tr>
</table>

<button onclick="saveAndCalculate()">ЁЯТ╛ Save & Calculate</button>

<p class="note">
ЁЯУМ рдиреЛрдЯ: рдпрд╣рд╛рдБ рдмрд┐рдХреНрд░реА % рд░ рджрд░ рдорд╛рддреНрд░ рд░рд╛рдЦрд┐рдиреНрдЫред  
рдЖрдореНрджрд╛рдиреА (Income) page рд▓реЗ рдпрд╣реА data рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рд░рдХрдо рдирд┐рдХрд╛рд▓реНрдЫред
</p>

<!-- ================= RESULT ================= -->
<h2 style="margin-top:30px">рел рд╡рд░реНрд╖реЗ рдЙрддреНрдкрд╛рджрди рдкрд░рд┐рдгрд╛рдо (рд╕рдВрдЦреНрдпрд╛)</h2>

<table>
<thead>
<tr>
<th>рд╡рд░реНрд╖</th>
<th>рдмрдпрд╕реНрдХ рд╕рдВрдЦреНрдпрд╛</th>
<th>рдмрд╛рдБрдЪреЗрдХ рдмрдЪреНрдЪрд╛</th>
<th>рдмрд┐рдХреНрд░реА (рдмрдЪреНрдЪрд╛)</th>
<th>рдорд╛рдЙ рдмрд┐рдХреНрд░реА</th>
<th>рдЕрд░реНрдХреЛ рд╡рд░реНрд╖рдХрд╛ рдмрдпрд╕реНрдХ</th>
</tr>
</thead>
<tbody id="resultBody"></tbody>
</table>

</div>

<script>
function num(id){return Number(document.getElementById(id).value)||0;}

function saveAndCalculate(){
  const plan={
    adult:num("adult"),
    breedRate:num("breedRate"),
    kids:num("kids"),
    death:num("death"),
    maleRate:num("maleRate"),
    years:[]
  };

  document.querySelectorAll(".sellKid").forEach((el,i)=>{
    plan.years.push({
      sellKid: Number(el.value)||0,
      kidRate: Number(document.querySelectorAll(".kidRate")[i].value)||0,
      sellAdult: Number(document.querySelectorAll(".sellAdult")[i].value)||0,
      adultRate: Number(document.querySelectorAll(".adultRate")[i].value)||0
    });
  });

  localStorage.setItem("productionSalesPlan",JSON.stringify(plan));
  calculate(plan);
}

function calculate(p){
  let body=document.getElementById("resultBody");
  body.innerHTML="";
  let adult=p.adult;

  for(let y=0;y<5;y++){
    let breeding=adult*p.breedRate/100;
    let born=breeding*p.kids;
    let alive=born*(100-p.death)/100;

    let sellKids=alive*p.years[y].sellKid/100;
    let sellAdult=adult*p.years[y].sellAdult/100;
    let nextAdult=adult+(alive-sellKids)-sellAdult;

    body.innerHTML+=`
    <tr>
      <td>${y+1}</td>
      <td>${Math.round(adult)}</td>
      <td>${Math.round(alive)}</td>
      <td>${Math.round(sellKids)}</td>
      <td>${Math.round(sellAdult)}</td>
      <td>${Math.round(nextAdult)}</td>
    </tr>`;
    adult=nextAdult;
  }
}

// load saved
let saved=localStorage.getItem("productionSalesPlan");
if(saved){
  let p=JSON.parse(saved);
  adult.value=p.adult;
  breedRate.value=p.breedRate;
  kids.value=p.kids;
  death.value=p.death;
  maleRate.value=p.maleRate;

  p.years.forEach((y,i)=>{
    document.querySelectorAll(".sellKid")[i].value=y.sellKid;
    document.querySelectorAll(".kidRate")[i].value=y.kidRate;
    document.querySelectorAll(".sellAdult")[i].value=y.sellAdult;
    document.querySelectorAll(".adultRate")[i].value=y.adultRate;
  });
  calculate(p);
}
</script>

</body>
</html>
