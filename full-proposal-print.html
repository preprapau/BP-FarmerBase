<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="UTF-8">
<title>Full Business Proposal | Farmerbase BP Engine</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
@media print{
  header,footer,.noprint{display:none}
  body{background:#fff}
}
body{
  font-family:"Noto Sans Devanagari","Kalimati",system-ui;
  background:#f4f7f6;margin:0;line-height:1.6
}
header,footer{
  background:#e8f5e9;
  padding:10px 16px;
  display:flex;
  justify-content:space-between
}
header a,footer a{
  color:#2e7d32;
  font-weight:600;
  text-decoration:none
}
.page{
  max-width:900px;
  margin:18px auto;
  background:#fff;
  padding:32px;
  border-radius:12px
}
h1,h2,h3{
  color:#2e7d32;
  margin-top:24px
}
hr{border:none;border-top:1px solid #ccc;margin:24px 0}
table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px
}
th,td{
  border:1px solid #ccc;
  padding:8px;
  text-align:right
}
th{background:#eef5ee}
.left{text-align:left}
.center{text-align:center}
.sum{font-weight:700;background:#fafafa}
.small{font-size:13px;color:#555}
</style>
</head>

<body>

<header class="noprint">
  <a href="proposal-narration.html">тЧАя╕П Back</a>
  <a href="#" onclick="window.print()">ЁЯЦия╕П Print / Save PDF</a>
</header>

<div class="page">

<h1 class="center">рд╡реНрдпрд╡рд╕рд╛рдпрд┐рдХ рдкреНрд░рд╕реНрддрд╛рд╡ (Business Proposal)</h1>
<p class="center small">
Farmerbase BP Engine рджреНрд╡рд╛рд░рд╛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдкрдорд╛ рддрдпрд╛рд░ рдЧрд░рд┐рдПрдХреЛ
</p>

<hr>

<h2>рез. рдкреНрд░рд╕реНрддрд╛рд╡рдХреЛ рд╕рд╛рд░рд╛рдВрд╢ (Executive Summary)</h2>
<p id="execSummary"></p>

<hr>

<h2>реи. рдЙрддреНрдкрд╛рджрди рд╡рд┐рд╡рд░рдг (Production Details)</h2>
<table>
<thead>
<tr>
  <th class="left">рдЙрддреНрдкрд╛рджрди</th>
  <th>рдкрд░рд┐рдорд╛рдг</th>
  <th>рдПрдХрд╛рдЗ</th>
</tr>
</thead>
<tbody id="prodBody"></tbody>
</table>

<hr>

<h2>рей. рдЦрд░реНрдЪ рд╡рд┐рд╡рд░рдг (Cost Structure)</h2>
<table>
<tr>
  <th class="left">рд╡рд┐рд╡рд░рдг</th>
  <th>рд░рдХрдо</th>
</tr>
<tr>
  <td class="left">рдЪрд╛рд▓реБ рдЦрд░реНрдЪ</td>
  <td id="operatingCost">0</td>
</tr>
<tr>
  <td class="left">рд╕реНрдерд┐рд░ рдЦрд░реНрдЪ / рд▓рдЧрд╛рдиреА</td>
  <td id="fixedCost">0</td>
</tr>
</table>

<hr>

<h2>рек. рдЖрдореНрджрд╛рдиреА рддрдерд╛ рдирд╛рдлрд╛ (Income & Profit)</h2>
<table>
<tr>
  <td class="left">рдХреБрд▓ рдЖрдореНрджрд╛рдиреА</td>
  <td id="totalIncome">0</td>
</tr>
<tr>
  <td class="left">рдХрд░-рдкреВрд░реНрд╡ рдирд╛рдлрд╛</td>
  <td id="profitBeforeTax">0</td>
</tr>
<tr>
  <td class="left">рдХрд░-рдкрдЫрд┐рдХреЛ рдЦреБрдж рдирд╛рдлрд╛</td>
  <td id="netProfit">0</td>
</tr>
</table>

<hr>

<h2>рел. рд▓рдЧрд╛рдиреА рдкреНрд░рддрд┐рдлрд▓ (ROI)</h2>
<table>
<tr>
  <td class="left">ROI (%)</td>
  <td id="roiPercent">0</td>
</tr>
<tr>
  <td class="left">рд▓рдЧрд╛рдиреА рдлрд┐рд░реНрддрд╛ рдЕрд╡рдзрд┐ (рд╡рд░реНрд╖)</td>
  <td id="payback">0</td>
</tr>
</table>

<hr>

<h2>рем. рел-рд╡рд░реНрд╖реЗ рд╡рд┐рддреНрддреАрдп рдкреНрд░рдХреНрд╖реЗрдкрдг (5-Year Projection)</h2>
<p>
рдФрд╕рдд рд╡рд╛рд░реНрд╖рд┐рдХ рд╡реГрджреНрдзрд┐рджрд░рдХрд╛ рдЖрдзрд╛рд░рдорд╛ рел рд╡рд░реНрд╖рдорд╛ рдХреБрд▓
<strong id="profit5y"></strong> рдирд╛рдлрд╛ рд╣реБрдиреЗ рдкреНрд░рдХреНрд╖реЗрдкрдг рдЧрд░рд┐рдПрдХреЛ рдЫред
</p>

<hr>

<h2>рен. рдирд┐рд╖реНрдХрд░реНрд╖ (Conclusion)</h2>
<p>
рдЙрдкрд░реЛрдХреНрдд рд╡рд┐рд╢реНрд▓реЗрд╖рдгрдХрд╛ рдЖрдзрд╛рд░рдорд╛ рдкреНрд░рд╕реНрддреБрдд рд╡реНрдпрд╡рд╕рд╛рдп рдЖрд░реНрдерд┐рдХ рд░реВрдкрдорд╛
рд╕рдореНрднрд╛рд╡реНрдп, рджрд┐рдЧреЛ рддрдерд╛ рд▓рд╛рднрджрд╛рдпрдХ рджреЗрдЦрд┐рдиреНрдЫред
рдпрд╕ рдкреНрд░рд╕реНрддрд╛рд╡рдХрд╛ рдЖрдзрд╛рд░рдорд╛ рдЖрд╡рд╢реНрдпрдХ рд╡рд┐рддреНрддреАрдп рд╕рд╣рдпреЛрдЧ / рд▓рдЧрд╛рдиреА рдкреНрд░рджрд╛рди
рдЧрд░рд┐рджрд┐рдиреБрд╣реБрди рдЕрдиреБрд░реЛрдз рдЧрд░реНрджрдЫреМрдБред
</p>

<hr>

<p class="small">
Prepared by Farmerbase BP Engine | Auto-generated Business Plan
</p>

</div>

<footer class="noprint">
  <a href="index.html">ЁЯПа Home</a>
</footer>

<script>
/* =====================================================
   LOAD PROJECT DATA
   ===================================================== */
const key = localStorage.getItem("activeProject");
if(!key){
  alert("Project рднреЗрдЯрд┐рдПрди");
  location.href="index.html";
}

const project = JSON.parse(localStorage.getItem(key)) || {};
const pl = project.profitLoss || {};
const roi = project.roi || {};
const proj5 = project.projection5y || {};
const alloc = project.costAllocation || {};

/* =====================================================
   HELPERS
   ===================================================== */
function money(n){
  return "рд░реБ " + (Number(n)||0).toFixed(2);
}

/* =====================================================
   EXECUTIVE SUMMARY
   ===================================================== */
execSummary.innerText = `
рдпрд╕ рдкреНрд░рд╕реНрддрд╛рд╡рд┐рдд рд╡реНрдпрд╡рд╕рд╛рдпрдХрд╛ рд▓рд╛рдЧрд┐ рдХреБрд▓ рд╕реНрдерд┐рд░ рд▓рдЧрд╛рдиреА ${money(pl.fixedCost)} рдЖрд╡рд╢реНрдпрдХ рд░рд╣реЗрдХреЛ рдЫред
рд╡рд╛рд░реНрд╖рд┐рдХ рдЪрд╛рд▓реБ рдЦрд░реНрдЪ ${money(pl.operatingCost)} рдЕрдиреБрдорд╛рди рдЧрд░рд┐рдПрдХреЛ рдЫред
рдпрд╕ рдпреЛрдЬрдирд╛рдмрд╛рдЯ рд╡рд╛рд░реНрд╖рд┐рдХ рдХреБрд▓ рдЖрдореНрджрд╛рдиреА ${money(pl.totalIncome)} рд░
рдХрд░-рдкрдЫрд┐рдХреЛ рдЦреБрдж рдирд╛рдлрд╛ ${money(pl.netProfit)} рд╣реБрдиреЗ рдкреНрд░рдХреНрд╖реЗрдкрдг рдЧрд░рд┐рдПрдХреЛ рдЫред
`;

/* =====================================================
   PRODUCTION TABLE
   ===================================================== */
prodBody.innerHTML = "";
Object.values(alloc).forEach(p=>{
  prodBody.innerHTML += `
  <tr>
    <td class="left">${p.name}</td>
    <td>${p.qty}</td>
    <td>${p.unit}</td>
  </tr>`;
});

/* =====================================================
   COST / PROFIT / ROI
   ===================================================== */
operatingCost.innerText = money(pl.operatingCost);
fixedCost.innerText = money(pl.fixedCost);
totalIncome.innerText = money(pl.totalIncome);
profitBeforeTax.innerText = money(pl.profitBeforeTax);
netProfit.innerText = money(pl.netProfit);

roiPercent.innerText =
  roi.roiPercent ? roi.roiPercent.toFixed(2)+" %" : "0 %";
payback.innerText =
  roi.paybackYears ? roi.paybackYears.toFixed(2) : "тАФ";

profit5y.innerText = money(proj5.total5YearProfit);
</script>

</body>
</html>
