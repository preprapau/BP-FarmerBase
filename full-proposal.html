<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="UTF-8">
<title>BPMS Proposal – Final</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:system-ui;background:#f4f6f8;margin:0;padding:20px}
.page{max-width:900px;margin:auto;background:#fff;padding:30px}
h1{color:#2e7d32}
.qr{text-align:right;margin-top:20px}
.sign{display:flex;justify-content:space-between;margin-top:40px}
</style>
</head>
<body>
<div class="page">
<h1 id="orgName">Sample</h1>
<p id="coverText"></p>

<div class="sign">
<div>
<b>Proprietor</b><br>
<span id="pbName"></span><br>
<span id="pbContact"></span>
</div>
<div>
<b>Authorized Signatory</b><br>
<span id="authName"></span><br>
<span id="authContact"></span>
</div>
</div>

<div class="qr"><canvas id="qrCanvas"></canvas></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/dist/qrious.min.js"></script>
<script>
let project=null;
Object.keys(localStorage).forEach(k=>{
 if(k.startsWith("bpms_")){
  const p=JSON.parse(localStorage.getItem(k));
  if(p.status==="final") project=p;
 }
});
function v(k,d=""){return project&&project[k]?project[k]:d;}
document.getElementById("orgName").innerText=v("name","Sample");
document.getElementById("coverText").innerText="यस संस्थाद्वारा पेश गरिएको प्रस्ताव।";
document.getElementById("pbName").innerText=v("proprietor","");
document.getElementById("pbContact").innerText=v("contact","");
document.getElementById("authName").innerText=v("authorizedSignatory","");
document.getElementById("authContact").innerText=v("authorizedContact","");
new QRious({element:qrCanvas,value:location.href,size:120});
</script>
</body>
</html>
