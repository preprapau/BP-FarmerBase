<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="UTF-8">
<title>Short Info | BPMS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family:"Noto Sans Devanagari","Kalimati","Mangal","Nirmala UI",system-ui,Arial;
  background:#f4f7f6;
  margin:0;
}
.container{
  max-width:900px;
  margin:25px auto;
  background:#fff;
  padding:25px;
  border-radius:10px;
}
h2{margin-top:0;color:#2e7d32}
h3{margin-top:30px;color:#2e7d32}

/* ===== PROGRESS ===== */
.progress-wrap{
  background:#e8f5e9;
  border:1px solid #c8e6c9;
  padding:12px;
  border-radius:8px;
  margin-bottom:15px;
}
.progress-title{font-weight:700;margin-bottom:6px}
.steps{font-size:13px}
.steps span{padding:3px 6px;border-radius:10px;background:#eee}
.steps .active{background:#2e7d32;color:#fff}
.bar-wrap{height:8px;background:#ddd;border-radius:6px;overflow:hidden;margin-top:8px}
.bar{height:100%;background:#2e7d32;width:14%}

/* ===== FORM ===== */
label{display:block;font-weight:600;margin-top:14px}
input,textarea{
  width:100%;
  padding:8px;
  margin-top:6px;
  font-family:inherit;
}
textarea{min-height:70px}

#autosaveStatus{font-size:13px;color:#2e7d32;margin-bottom:10px}

.nav{
  display:flex;
  justify-content:space-between;
  margin-top:30px;
}
button{
  padding:8px 16px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  background:#2e7d32;
  color:#fff;
}
</style>
</head>

<body>
<div class="container">

<div class="progress-wrap">
  <div class="progress-title">рдЪрд░рдг 1 / 7 (14%)</div>
  <div class="steps">
    <span class="active">Short Info</span> тЖТ
    <span>Detail</span> тЖТ
    <span>Expense</span> тЖТ
    <span>Income</span> тЖТ
    <span>Profit</span> тЖТ
    <span>ROI</span> тЖТ
    <span>Proposal</span>
  </div>
  <div class="bar-wrap"><div class="bar"></div></div>
</div>

<div id="autosaveStatus">ЁЯТ╛ Saved</div>

<h2>тЬПя╕П рд╡реНрдпрд╡рд╕рд╛рдп / рдкреНрд░рд╕реНрддрд╛рд╡рдирд╛рдХреЛ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рд╡рд┐рд╡рд░рдг</h2>

<label>рд╡реНрдпрд╡рд╕рд╛рдп / рдкреНрд░рд╕реНрддрд╛рд╡рдирд╛рдХреЛ рдирд╛рдо</label>
<input id="bp_name">

<label>рд╕рдЮреНрдЪрд╛рд▓рди рд╣реБрдиреЗ рд╕реНрдерд╛рди (рдареЗрдЧрд╛рдирд╛)</label>
<input id="bp_location">

<label>рд╕рдЮреНрдЪрд╛рд▓рди рдЧрд░реНрдиреЗ рд╕рдВрд╕реНрдерд╛</label>
<input id="bp_org">

<label>рдкреНрд░реЛрдкреНрд░рд╛рдЗрдЯрд░рдХреЛ рдирд╛рдо</label>
<input id="bp_owner">

<label>рд╕рдореНрдкрд░реНрдХ рдирдореНрдмрд░</label>
<input id="bp_phone">

<label>рдЙрддреНрдкрд╛рджрди / рд╡реНрдпрд╡рд╕рд╛рдпрд┐рдХ рдкреНрд░рдХреГрддрд┐</label>
<textarea id="bp_products"></textarea>

<hr>

<h3>рд╕рдВрд╕реНрдерд╛рдЧрдд рдкрд░рд┐рдЪрдп</h3>

<label>рджрд░реНрддрд╛ рдорд┐рддрд┐</label>
<input id="reg_date">

<label>рджрд░реНрддрд╛ рдирд┐рдХрд╛рдп</label>
<input id="reg_authority">

<label>рджрд░реНрддрд╛ рдирдВ</label>
<input id="reg_no">

<label>PAN рдирдВ</label>
<input id="pan_no">

<hr>

<h3>рд▓рд╛рднрд╛рдиреНрд╡рд┐рдд рд╕рдореВрд╣</h3>

<label>рд╕рдореВрд╣ рдкреНрд░рдХрд╛рд░</label>
<input id="benef_group_type">

<label>рдорд╣рд┐рд▓рд╛ рд╕рдВрдЦреНрдпрд╛</label>
<input id="female_count" type="number">

<label>рдкреБрд░реБрд╖ рд╕рдВрдЦреНрдпрд╛</label>
<input id="male_count" type="number">

<label>рдЬрдореНрдорд╛ рд╕рдВрдЦреНрдпрд╛</label>
<input id="total_count" type="number">

<div class="nav">
  <button onclick="goPrev()">тмЕ Home</button>
  <button onclick="goNext()">Next тЮб</button>
</div>

</div>

<script>
/* ===== SAFETY ===== */
let activeKey = localStorage.getItem("activeProject");
if(!activeKey){
  alert("рдкрд╣рд┐рд▓реЗ Home рдмрд╛рдЯ Project рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реН");
  location.href="index.html";
}
let project = JSON.parse(localStorage.getItem(activeKey));

/* ===== LOAD ===== */
function loadForm(){
  let s = project.shortInfo||{};
  document.querySelectorAll("input,textarea").forEach(el=>{
    if(s[el.id]) el.value = s[el.id];
  });
}
loadForm();

/* ===== SAVE / AUTOSAVE ===== */
function saveShortInfo(){
  let data={};
  document.querySelectorAll("input,textarea").forEach(el=>{
    data[el.id]=el.value||"";
  });
  project.shortInfo=data;
  project.lastEdited=new Date().toLocaleString("ne-NP");
  localStorage.setItem(activeKey,JSON.stringify(project));
  autosaveStatus.innerText="тЬФ Saved";
}

let t;
document.querySelectorAll("input,textarea").forEach(el=>{
  el.addEventListener("input",()=>{
    autosaveStatus.innerText="тП│ Saving...";
    clearTimeout(t);
    t=setTimeout(saveShortInfo,700);
  });
});

function goPrev(){location.href="index.html";}
function goNext(){saveShortInfo();location.href="business-detail.html";}
</script>

</body>
</html>
